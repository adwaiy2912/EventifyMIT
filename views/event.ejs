<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>EventifyMIT</title>
      <link rel="icon" href="../img/Logo.png" type="image/x-icon" />
      <link rel="stylesheet" href="../css/reset.css" />
      <link rel="stylesheet" href="../css/headerFooter.css" />
      <link rel="stylesheet" href="../css/eventCard.css" />
      <link rel="stylesheet" href="../bootstrap-5.3.3/css/bootstrap.css" />
      <script defer src="../js/eventCard.js"></script>
      <script defer src="../bootstrap-5.3.3/js/bootstrap.js"></script>
   </head>
   <body>
      <%- include("layout/header")%>

      <main>
         <div class="card m-3">
            <img
               src="<%= getEventBgSrc(event.event_type_id, event.event_name)%>"
               alt=""
               class="card__image"
            />
            <div class="card__overlay text-end">
               <div class="card__header text-start">
                  <img
                     class="card__thumb"
                     src="<%= getEventIconSrc(event.event_type_id)%>"
                     alt="concert"
                  />
                  <div class="card__header-text">
                     <h2 class="card__title text-center">
                        <%= event.event_name %>
                     </h2>
                     <h6 class="card__subtitle mb-2 text-muted text-center">
                        <%= eventType %>
                     </h6>
                     <span class="card__tagline card__date"
                        ><b>Date: </b><%=
                        event.event_date.toISOString().slice(0, 10) + ", " +
                        event.event_time %></span
                     >
                     <span class="card__tagline card__deadline"
                        ><b>Deadline: </b><%=
                        event.registration_deadline.toISOString().slice(0, 10)
                        %></span
                     >
                     <span class="card__tagline card__venue text-end"
                        ><b>Venue:</b> <%= venue %></span
                     >
                     <span class="card__tagline card__fees text-end"
                        ><b>Fees:</b> <% if (event.fees === 0) { %> Free <% }
                        else { %> &#8377;<%= event.fees %> <% } %></span
                     >
                  </div>
               </div>
               <p class="card-text p-3 text-start">
                  <%= event.event_description %>
               </p>

               <% if (user === 'ATTENDEE') { %> <% if (status === "REGISTER") {
               %>
               <p class="card__txt fw-bold text-decoration-underline">
                  Registered
               </p>
               <% } else { %>
               <button
                  class="btn btn-primary card__button"
                  id="registerToEvent"
                  data-event-id="<%= event.event_id %>"
                  data-user-id="<%= attendeeID %>"
                  data-event-fees="<%= event.fees %>"
               >
                  Register
               </button>
               <% } %> <% } else { %>
               <div class="d-flex justify-content-between w-100 p-4">
                  <button class="btn btn-secondary">Edit Event</button>
                  <button class="btn btn-primary" type="submit">
                     View Details
                  </button>
               </div>
               <% } %>
            </div>
         </div>
      </main>

      <%- include("layout/footer")%>
   </body>
</html>
